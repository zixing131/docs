

# 社会工程学攻击 - 钓鱼 - 先知社区

社会工程学攻击 - 钓鱼

- - -

## 钓鱼方式

1.钓鱼邮件

钓鱼邮件指利用伪装的电邮，欺骗收件人将账号、口令等信息回复给指定的接收者；或引导收件人连接到特制的网页，这些网页通常会伪装成和真实网站一样，如银行或理财的网页，令登录者信以为真，输入信用卡或银行卡号码、账户名称及密码等而被盗取。

2.钓鱼 wifi

仿造一个假的 wifi，欺骗用户登陆，之后窃取用户信息

3.钓鱼二维码

网站地址（URL）被编成 QR 二维码，有些网站将网站登录的 URL 存储在 QR 码上。攻击者用伪造的 QR 码替换合法的 QR 码，篡改登录网站的 URL 信息，将用户导向一个假冒的登录页面。在这种情况下，用户扫描 QR 码后，访问了伪造的登陆页面，将个人信息泄露给了攻击者。

4.伪基站

又称假基站、假基地台，是一种利用 GSM 单向认证缺陷的非法无线电通信设备，主要由主机和笔记本电脑组成，能够搜取以其为中心、一定半径范围内的 GSM 移动电话信息，并任意冒用他人手机号码强行向用户手机发送诈骗、推销等垃圾短信，通常安放在汽车或者一个比较隐蔽的地方发送。

伪基站 + 短信 + 网页……

5.标签钓鱼

标签钓鱼 (tabnabbing) 是一种新的网络钓鱼攻击手法，该攻击手法是由 Mozilla Firefox 浏览器的界面及创意负责人 Aza Raskin 发现和命名的，tabnabbing 可改变用户浏览网页的标签及接口，以诱导用户输入网络服务的账号与密码。因此，Raskin 将此手法称为标签绑架（tabnapping），他指出当使用者连上一个嵌有第三方 script 程序或 Flash 工具的网页时，就会让自己曝露于风险中，因为相关的恶意软件得以侦测使用者经常使用或正在使用的网络服务，在用户暂时离开该网页后，该网页内容及网页标签会悄悄地变身成为伪造的网络服务，并诱导用户输入个人信息

6.鱼叉式网络钓鱼

指一种源于亚洲与东欧只针对**特定目标**进行攻击的网络钓鱼攻击。

注：

水坑攻击

”水坑攻击”，黑客攻击方式之一，顾名思义，是在受害者必经之路设置了一个“水坑 (陷阱)”。最常见的做法是，黑客分析攻击目标的上网活动规律，寻找攻击目标经常访问的网站的弱点，先将此网站“攻破”并植入攻击代码，一旦攻击目标访问该网站就会“中招”。

水坑攻击属于 APT 攻击的一种，与钓鱼攻击相比，黑客无需耗费精力制作钓鱼网站，而是利用合法网站的弱点，隐蔽性比较强。在人们安全意识不断加强的今天，黑客处心积虑地制作钓鱼网站却被有心人轻易识破，而水坑攻击则利用了被攻击者对网站的信任。水坑攻击利用网站的弱点在其中植入攻击代码，攻击代码利用浏览器的缺陷，被攻击者访问网站时终端会被植入恶意程序或者直接被盗取个人重要信息。

水坑攻击相对于通过社会工程方式引诱目标用户访问恶意网站更具欺骗性，效率也更高。水坑方法主要被用于有针对性的攻击，而 Adobe Reader、Java 运行时环境（JRE）、Flash 和 IE 中的零漏洞被用于安装恶意软件。

7.U 盘钓鱼

简单来说就是在 U 盘里面植入木马或者病毒，进行钓鱼

注：U 盘嘛，你可以撇目标单位门口，或者社工个人信息，邮寄给他

## 演示环境

-   服务器：centos 7
-   服务器：windows 7
-   服务器：windows 2008 r2
-   攻击机：kali linux
-   靶机：windows 7

## 制作钓鱼邮件内容-Cobalt strike

进入 cobalt strike 目录

[![](assets/1698897256-715e0dc003599d6848b0b1a2146cd6ff.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220319-58988722-061e-1.png)

启动 teamserver

执行命令`sudo ./teamserver 192.168.32.138 mitian`

[![](assets/1698897256-faba4e011612d00cd27efee8ad9de323.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220323-5b4f60da-061e-1.png)

新建终端，进入目录，启动客户端

执行`./cobalstrike`

[![](assets/1698897256-1bd9d74171c96737d91ccef4c98a147e.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220335-624d55ae-061e-1.png)

[![](assets/1698897256-114a31240b7919edc9f78daf6bb85d66.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220341-65823230-061e-1.png)

新建一个监听器

[![](assets/1698897256-1d82282b3cb7862715a9d4516708d597.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220343-671094c0-061e-1.png)

点击底部 add 添加

[![](assets/1698897256-dd486bf67e1068ed22d87e13986d12b8.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220357-6f3b3312-061e-1.png)

[![](assets/1698897256-29de03b6745867e0afe5779714a78f5e.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220401-71e4cee8-061e-1.png)

点击 attacks-packages-ms office macro 创建 word 宏病毒

[![](assets/1698897256-f2f0c2dcb93fcfa1662f7aefba88002d.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220409-76388b74-061e-1.png)

[![](assets/1698897256-e9a979f3fd36214a116b7847094e93dc.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220411-77973ace-061e-1.png)

[![](assets/1698897256-23dbd2321cf3b2a3c45b61f854b25ce3.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220417-7b6042d6-061e-1.png)

创建 word 文档，添加病毒

[![](assets/1698897256-75304545baa114f2e316e9acefc4f637.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220425-7fbd9c70-061e-1.png)

[![](assets/1698897256-d1643ebe5b4f83e5adf7829b9135c622.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220430-82d4724e-061e-1.png)

正文随便加点东西【当然我这是测试，加什么都行】

[![](assets/1698897256-e9269ae900b37f04a316bec016a36070.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220454-9104ac1c-061e-1.png)

## 钓鱼网站的制作

### 方法一

上面是利用 cobalstrike 制作一个 word 文档的病毒，当然你也可以使用它 clone 一个网站

点击 attacks---web drive-by --- clone site，添加你要克隆的网站，我选的补天登陆页面

[![](assets/1698897256-300a388532d46a91f201b28740188da8.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220501-9588bb02-061e-1.png)

[![](assets/1698897256-b5561febe00caaa2d1f4c2dc2c209084.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220509-9a15ba08-061e-1.png)

访问 192.168.32.142:80

[![](assets/1698897256-e8f37cce505fcc0c20f3b0e069ecac67.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220527-a5095a32-061e-1.png)

当然最好是自己搭建一个钓鱼网站，上面是演示

### 方法二

打开 kali linux 的 Social-Engineer Toolkit

[![](assets/1698897256-3b9310b543df136a67e4167774132301.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220532-a812a6ac-061e-1.png)

【或者终端输入 setoolkit 启动】

[![](assets/1698897256-667acfe4d49e962891c66119006905e1.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220556-b60783cc-061e-1.png)

选择 1 社会工程学攻击，出现下图

[![](assets/1698897256-7947fd72921d983873ca43f0df28b77a.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220603-ba995f46-061e-1.png)

选择 2 网站攻击，出现下图

[![](assets/1698897256-49c0085ebff4e5f50a90aafc88b51a91.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220629-c9d893aa-061e-1.png)

选择 3 钓鱼网站攻击，出现下图

[![](assets/1698897256-8fbb5596518b604823ac32c666c43070.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220637-ceb44dba-061e-1.png)

选择 2 网站克隆，出现下图

并输入 ip，这里已经给出了

[](https://imgchr.com/i/ZnxMpq)[![](assets/1698897256-c23b28cda378ca53beaff10e622edf87.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220711-e2c727f0-061e-1.png)

输入要克隆的网站

[![](assets/1698897256-30439712ae77deed94b4cab2bfcaca62.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220720-e85fc17c-061e-1.png)

到这的时候输入一个 Y

[![](assets/1698897256-346ad1e792aebc78a4d63ac2070553fa.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220726-eba4503c-061e-1.png)

访问网站

[![](assets/1698897256-e360367b3f3a38cacdd571068760ce62.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220733-efd4f256-061e-1.png)

假装受害者登陆，输入用户和密码

[![](assets/1698897256-5e3eb835174cdafffebebbced18f0b25.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220737-f2b1995c-061e-1.png)

kali 终端显示信息

[![](assets/1698897256-3f30baf8cbc6b31f004d58e49da6e6a9.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220745-f714c514-061e-1.png)

**注：Social-Engineer Toolkit 有很多玩法，比如鱼叉，钓鱼二维码，wifi 等，使用方法大同小异，自行研究**

### 方法三

自己搭建一个，比如 QQ 空间

找个 QQ 空间的源码，放到服务器上

[![](assets/1698897256-6837cb97a312de666939510ebac86dbf.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220748-f8fdd21c-061e-1.png)

访问，输入用户 mitian，密码 mitian

[![](assets/1698897256-3e69c9b8744146e3caa18ec209f3306d.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220819-0b3f11c0-061f-1.png)

访问后台

[![](assets/1698897256-3cd44f10372b5a6bba640aa8908ed396.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220821-0cdcd1d4-061f-1.png)

## U 盘钓鱼

### Unicode RTLO

RIGHT TO LEVER OVERRIDE 是一种 Unicode，主要用于书写和阅读阿拉伯语或希伯来语文本。Unicode 有一个特殊字符 U + 202e，它告诉计算机以从右到左的顺序显示它后面的文本。此漏洞用于伪装文件名称。例如，caijueexe.doc 的文件名实际上是 caijuedoc.exe 的可执行文件

1.准备一个 bat 文件  
[![](assets/1698897256-61695949526fb3ca52f4757ceab241a8.jpg)](https://xzfile.aliyuncs.com/media/upload/picture/20191113170544-c68f5e88-05f4-1.jpg)  
2.鼠标右键---重命名---插入 Unicode 字符---选择 RLO--输入“txt.bat”  
[![](assets/1698897256-9a9db92e0660d9c12b5e0d349e9d52ae.jpg)](https://xzfile.aliyuncs.com/media/upload/picture/20191113170606-d3b149f0-05f4-1.jpg)  
3.显示如下，看到的是一个以 txt 结尾的文件，但实际上却是从右开始读的 bat 文件，在属性里面可以看到  
[![](assets/1698897256-07d699054e9e6007411361d3587d369e.jpg)](https://xzfile.aliyuncs.com/media/upload/picture/20191113170623-dd7d924a-05f4-1.jpg)  
4.假如目标以为这是一个 txt 文本，双击执行一下  
[![](assets/1698897256-c23c6e36894b2e07cb0d072ee62b972f.jpg)](https://xzfile.aliyuncs.com/media/upload/picture/20191113170641-e8556198-05f4-1.jpg)  
看着像 txt，其实是 bat

## 邮件伪造发送之 SWAKS

1.测试是否可以和目标邮箱发送数据

执行命令：`swaks –to [136*****@qq.com]`

[![](assets/1698897256-7face1f8fefb14397acd35d33e6fe1f2.jpg)](https://xzfile.aliyuncs.com/media/upload/picture/20191113171021-6b359d58-05f5-1.jpg)

2.swaks 参数说明

执行命令：`swaks –help` 可以看到 n 多参数和实例

[![](assets/1698897256-ae775c7980d976aeed56237a0c0d46e8.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220852-1f2518d8-061f-1.png)

\--to 目标邮箱

\--from 邮件发送者

\--attach 添加附件

\--header-From 邮件头

\--header "Subject:主题" 邮件主题

3.发送钓鱼邮件

执行

`swaks --to 136****46@qq.com --from l***ng@qianxin.com --h-From: '"总裁办"<admin@qianxin.com>' --header "Subject: 关于集团报告渗透测试word模板更新的通告" --body "各位一线工程师，集团对外word统一格式，请下载附件使用，谢谢合作！" --attach-name 渗透报告模版.doc --attach-type application/msword --attach /tmp/渗透报告模版.doc`

**注：attach-type 是传输文件的 MIME 类型**

​ **attach-name 是名字**

**理论上不加这两个也可以的，不过我这里面不加有点小问题**

[![](assets/1698897256-0d40647570a258dac36a2ff326cd053d.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220926-335726a2-061f-1.png)

[![](assets/1698897256-66fa10b892bba63a6a32ab463c4b6ab7.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220942-3cee4056-061f-1.png)

伪造发送成功

4.cobalstrike 主机上线啦！

假装受害者打开 word

滴！肉鸡上线

[![](assets/1698897256-92c74a163b95e0250dec2423c39b53b0.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113220951-429b6204-061f-1.png)

[![](assets/1698897256-b8a9bfc48e58a05013871b1853350f5f.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113221059-6adecbc0-061f-1.png)

## 邮件伪造发送之 EMKEI’SMAILER

在线的邮件伪造发送工具

网址：[https://emkei.cz/](https://emkei.cz/)

[![](assets/1698897256-038a47f17d1db3e0df8e5272db302300.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113221107-6f5a3838-061f-1.png)

[![](assets/1698897256-1e05829aad7ab1e41d3bad5730b59aab.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113221111-720466e4-061f-1.png)

简单试了试 139 邮箱，噢哟可以哦！

[![](assets/1698897256-ca45aecb591efbd6e35d06677fe3a038.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113221114-740eacec-061f-1.png)

附赠一个：邮箱匿名注册的网站

网址：[http://www.yopmail.com](http://www.yopmail.com/)

**注：邮件发送，还可以自己搭建 SMTP 服务，之后使用诸如 SimpleEmailSpoofer 等伪造域名发送。**

## 伪造钓鱼邮件注意事项

1.  钓鱼嘛，鱼饵肯定要诱人才会有鱼上钩，比如：美女图片、中奖
2.  尽量仿造的像真的一样，注意：签名、模版、图标、落款等细节
3.  网站，链接等钓鱼，最好用相似度较高的域名
4.  附件肯定要过杀软！！！【百度一下肯定有】

## 钓鱼邮件防范

1.  不要轻易相信邮件里的附件，比如 word 里的宏
2.  注册链接，中奖链接不要轻易相信
3.  注意邮件行文风格、落款、签名等地方
4.  服务器响应快慢，一般钓鱼的服务器配置都不是很高
5.  如果突然有封邮件言辞激励，请不要回复，因为它可能在社工你的邮件签名等信息

## 注：文章首发弥天实验室，内容不当处，大佬勿喷

## 总结

总结个锤子…

[![](assets/1698897256-e40fa5d64522e6dd7d0e993ac6890703.png)](https://xzfile.aliyuncs.com/media/upload/picture/20191113221139-8285d372-061f-1.png)
